version: '3'

tasks:
  create:
    desc: Create the complete remote infrastructure (Terraform apply + kubectl setup)
    cmds:
      - |
        echo "ğŸš€ Creating remote infrastructure..."
        echo ""
        echo "ğŸ“‹ Step 1: Applying Terraform configuration..."
      - task: infrastructure:terraform:apply

  setup:
    desc: Setup kubectl configuration using setup script
    cmds:
      - echo "ğŸ”§ Initializing Terraform..."
      - task: infrastrcture:terraform:init

  destroy:
    desc: Destroy the complete remote infrastructure
    prompt: Are you sure you want to DESTROY all remote infrastructure?
    cmds:
      - echo "ğŸ’¥ Destroying remote infrastructure..."
      - echo ""
      - echo "âš ï¸  This will destroy:"
      - echo "   â€¢ Kubernetes cluster and all workloads"
      - echo "   â€¢ PostgreSQL database and all data"
      - echo "   â€¢ Redis instance and all data"
      - echo ""
      - task: infrastructure:terraform:destroy
      - echo ""
      - echo "ğŸ’€ Remote infrastructure destroyed!"

  status:
    desc: Show status of remote infrastructure
    cmds:
      - echo "ğŸ“Š Remote Infrastructure Status"
      - echo "==============================="
      - echo ""
      - echo "ğŸ—ï¸  Terraform Resources:"
      - task: infrastructure:terraform:show

  outputs:
    desc: Show remote infrastructure outputs
    cmds:
      - echo "ğŸ“‹ Remote Infrastructure Outputs"
      - echo "================================="
      - task: infrastructure:terraform:output

  validate:
    desc: Validate remote infrastructure configuration
    cmds:
      - echo "âœ… Validating remote infrastructure..."
      - echo ""
      - echo "ğŸ” Terraform validation:"
      - task: infrastructure:terraform:validate
      - echo ""
      - echo "ğŸ” Terraform format check:"
      - task: infrastructure:terraform:format:check
      - echo ""
      - echo "âœ… Remote infrastructure validation complete!"
